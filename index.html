<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MindBloom - ระบบแบบเต็ม</title>
  <link href="https://fonts.googleapis.com/css2?family=Maitree&family=Noto+Sans+Thai&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Maitree', 'Noto Sans Thai', serif;
      background-color: #e3ffe6;
      min-height: 100vh;
    }
    /* -- Login & Register Card -- */
    .login-card {
      max-width: 900px;
      margin: 3rem auto;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      overflow: hidden;
      background: #fff;
      display: flex;
      min-height: 500px;
    }
    .gradient-custom-2 {
      background: linear-gradient(135deg, #24eed3 0%, #36d846 33%, #50ee24 66%, #89f134 100%);
      color: white;
      padding: 3rem 2rem;
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .gradient-custom-2 h3 {
      font-weight: 700;
      font-size: 2.2rem;
      margin-bottom: 1rem;
    }
    .gradient-custom-2 p {
      font-style: italic;
      font-size: 1.1rem;
      margin-bottom: 2rem;
      line-height: 1.4;
    }
    .form-container {
      flex: 1;
      padding: 3rem 3rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .form-label {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .form-control {
      border-radius: 10px;
      padding: 10px 14px;
      font-size: 1rem;
      border: 1.8px solid #ddd;
      transition: border-color 0.3s;
    }
    .form-control:focus {
      border-color: #36d846;
      box-shadow: none;
    }
    .btn-primary {
      background-color: #36d846;
      border-color: #36d846;
      font-weight: 600;
      border-radius: 50px;
      padding: 12px 30px;
      font-size: 1.1rem;
      width: 100%;
      transition: background-color 0.3s ease;
    }
    .btn-primary:hover {
      background-color: #2cb43e;
      border-color: #2cb43e;
    }
    .text-center img {
      max-width: 110px;
      margin-bottom: 1rem;
      user-select: none;
    }
    .text-center a {
      color: #36d846;
      font-weight: 600;
      text-decoration: none;
    }
    .text-center a:hover {
      text-decoration: underline;
    }
    /* --- Page 10 --- */
    #page10 {
      min-height: 100vh;
      background-color: #e3ffe6;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      padding: 1rem;
      text-align: center;
      user-select: none;
    }
    #page10 img {
      max-width: 110px;
    }
    #page10 h1 {
      font-weight: 700;
      font-size: 3.8rem;
      letter-spacing: 10px;
      margin: 0;
      color: #222;
    }
    #page10 button {
      background-color: #36d846;
      border: none;
      font-size: 1.3rem;
      padding: 14px 50px;
      border-radius: 50px;
      box-shadow: 0 6px 10px rgb(54 216 70 / 0.4);
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #page10 button:hover {
      background-color: #2cb43e;
    }
    /* --- Page 11 --- */
    #page11 {
      min-height: 100vh;
      background-color: #fffbe6;
      padding: 4rem 1rem;
      position: relative;
      user-select: none;
    }
    .assessment-watermark {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 400px;
      height: 400px;
      background: url('https://i.ibb.co/bMnR3VNv/LINE-ALBUM-250603-1-1.jpg') no-repeat center center;
      background-size: contain;
      opacity: 0.08;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: 0;
    }
    .assessment-question {
      max-width: 600px;
      margin: 0 auto 2.5rem auto;
      font-weight: 600;
      font-size: 1.1rem;
      color: #222;
    }
    .scale-labels {
      max-width: 600px;
      margin: 0 auto 10px auto;
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: #555;
      font-weight: 600;
    }
    .radio-group-custom {
      display: flex;
      justify-content: center;
      gap: 18px;
      max-width: 600px;
      margin: 0 auto 30px auto;
    }
    .radio-group-custom label {
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 0.85rem;
      user-select: none;
      color: #333;
      font-weight: 500;
    }
    .radio-group-custom input[type="radio"] {
      display: none;
    }
    .custom-radio-scale {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 2.5px solid #888;
      background: #fff;
      margin-bottom: 6px;
      transition: all 0.3s ease;
    }
    .radio-group-custom input[type="radio"]:checked + .custom-radio-scale {
      background-color: #36d846;
      border-color: #36d846;
      box-shadow: 0 0 8px #36d846;
    }
    .btn-lg {
      font-weight: 700;
      border-radius: 50px;
      padding: 12px 40px;
      background-color: #36d846;
      border: none;
      color: white;
      cursor: pointer;
      box-shadow: 0 6px 10px rgb(54 216 70 / 0.4);
      transition: background-color 0.3s ease;
      display: block;
      margin: 2rem auto 0 auto;
      user-select: none;
      font-size: 1.2rem;
    }
    .btn-lg:hover {
      background-color: #2cb43e;
    }
    /* Hide all pages initially */
    #pageLogin, #pageRegister, #page10, #page11, #page12, #page13, #page14 {
      display: none;
    }
    .mission-item {
      background:#fff; 
      padding:1rem 1.5rem; 
      margin-bottom:1rem; 
      border-radius:14px; 
      box-shadow:0 4px 12px rgba(0,0,0,0.05);
      font-size:1.1rem;
      position:relative;
    }
    .rotate-sword {
      animation: sword-rotate 0.5s;
    }
    @keyframes sword-rotate {
      0% { transform: rotate(0deg);}
      50% { transform: rotate(-30deg);}
      100% { transform: rotate(0deg);}
    }
    .monster-hit {
      animation: shake 0.4s, hit-blink 0.4s;
      filter: drop-shadow(0 0 32px #ff1a1a) drop-shadow(0 0 16px #ff0000);
    }
    @keyframes hit-blink {
      0% { filter: brightness(1) drop-shadow(0 0 32px #ff1a1a) drop-shadow(0 0 16px #ff0000);}
      50% { filter: brightness(2) drop-shadow(0 0 48px #ff1a1a) drop-shadow(0 0 32px #ff0000);}
      100% { filter: brightness(1) drop-shadow(0 0 32px #ff1a1a) drop-shadow(0 0 16px #ff0000);}
    }
    @keyframes shake {
      0% { transform: translate(0, 0) rotate(0deg); }
      10% { transform: translate(-5px, 0) rotate(-2deg); }
      20% { transform: translate(5px, 0) rotate(2deg); }
      30% { transform: translate(-5px, 0) rotate(-2deg); }
      40% { transform: translate(5px, 0) rotate(2deg); }
      50% { transform: translate(-3px, 0) rotate(-1deg); }
      60% { transform: translate(3px, 0) rotate(1deg); }
      70% { transform: translate(-2px, 0) rotate(-1deg); }
      80% { transform: translate(2px, 0) rotate(1deg); }
      90% { transform: translate(0, 0) rotate(0deg); }
      100% { transform: translate(0, 0) rotate(0deg); }
    }
    /* Mascot เพื่อนให้กำลังใจ (เอารูปออก เหลือแต่กล่องข้อความ) */
    #mascotSpeech {
      display: none;
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 999;
      background: #fff;
      padding: 14px 22px;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.18);
      font-size: 1.08rem;
      font-weight: 500;
      color: #2c662d;
      animation: mascotPop 0.4s;
    }

  </style>
</head>
<body>
  <div id="globalLogo" style="position:fixed; top:18px; left:18px; z-index:1000; cursor:pointer;" onclick="showPage('pageLogin')">
    <img src="https://i.ibb.co/bMnR3VNv/LINE-ALBUM-250603-1-1.jpg" alt="MindBloom Logo" style="width:62px; height:62px; border-radius:50%; border:3px solid #fff; box-shadow:0 2px 10px #0002; background:#fff; object-fit:cover;">
  </div>

  <!-- Login Page -->
  <div id="pageLogin" class="login-card">
    <div class="gradient-custom-2">
      <h3>MENTAL HEALTH</h3>
      <p>"Nurturing every mind with care, compassion, and the courage to grow through every season of life."</p>
    </div>
    <div class="form-container">
      <div class="text-center">
        <img src="https://i.ibb.co/bMnR3VNv/LINE-ALBUM-250603-1-1.jpg" alt="Logo" />
      </div>
      <form id="loginForm">
        <div class="mb-3">
          <label for="loginUsername" class="form-label">ชื่อผู้ใช้ (นามสมมติ)</label>
          <input type="text" class="form-control" id="loginUsername" placeholder="กรอกชื่อผู้ใช้" required />
        </div>
        <div class="mb-4">
          <label for="loginPassword" class="form-label">รหัสผ่าน</label>
          <input type="password" class="form-control" id="loginPassword" placeholder="กรอกรหัสผ่าน" required />
        </div>
        <button type="submit" class="btn btn-primary">เข้าสู่ระบบ</button>
      </form>
      <div class="text-center mt-3">
        <p>ยังไม่มีบัญชี? <a href="#" id="goToRegister">สมัครสมาชิก</a></p>
      </div>
    </div>
  </div>

  <!-- Register Page -->
  <div id="pageRegister" class="login-card">
    <div class="gradient-custom-2">
      <h3>สมัครสมาชิก</h3>
      <p>สร้างบัญชีใหม่เพื่อเริ่มต้นใช้งาน</p>
    </div>
    <div class="form-container">
      <div class="text-center">
        <img src="https://i.ibb.co/bMnR3VNv/LINE-ALBUM-250603-1-1.jpg" alt="Logo" />
      </div>
      <form id="registerForm">
        <div class="mb-3">
          <label for="registerUsername" class="form-label">ชื่อผู้ใช้ (นามสมมติ)</label>
          <input type="text" class="form-control" id="registerUsername" placeholder="กรอกชื่อผู้ใช้" required />
        </div>
        <div class="mb-3">
          <label for="registerPhone" class="form-label">เบอร์โทรศัพท์</label>
          <input type="tel" class="form-control" id="registerPhone" placeholder="กรอกเบอร์โทรศัพท์" required />
        </div>
        <div class="mb-4">
          <label for="registerPassword" class="form-label">รหัสผ่าน</label>
          <input type="password" class="form-control" id="registerPassword" placeholder="ตั้งรหัสผ่าน" required />
        </div>
        <button type="submit" class="btn btn-primary">สมัครสมาชิก</button>
      </form>
      <div class="text-center mt-3">
        <p>มีบัญชีแล้ว? <a href="#" id="goToLogin">เข้าสู่ระบบ</a></p>
      </div>
    </div>
  </div>

  <!-- Page 10: Pre-assessment -->
  <div id="page10" style="position: relative; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #e3ffe6;">
    <!-- พื้นหลังรูป png -->
    <div style="
      position: absolute;
      top: 50%; left: 50%;
      width: 350px; height: 350px;
      background: url('https://i.ibb.co/bMnR3VNv/LINE-ALBUM-250603-1-1.png') no-repeat center center;
      background-size: contain;
      opacity: 0.13;
      transform: translate(-50%, -50%);
      z-index: 0;
      pointer-events: none;
    "></div>
    <div style="position: relative; z-index: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 60vh;">
      <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
        <h1 style="letter-spacing: 10px; font-weight: 700; color: #222; margin-bottom:0;">M I N D</h1>
        <h1 style="letter-spacing: 10px; font-weight: 700; color: #222; margin-bottom:0;">B L O O M</h1>
      </div>
      <button id="startAssessmentBtn" class="btn btn-success btn-lg px-4 py-2 rounded-pill shadow" style="margin-top:3rem;">
        เริ่มทำแบบประเมิน
      </button>
    </div>
  </div>

  <!-- Page 11: Assessment Questions (รวม 1-5 ในหน้าเดียว) -->
  <div id="page11" style="display:none; min-height:100vh; background-color:#e3ffe6; padding:4rem 1rem; position:relative; user-select:none;">
  <div class="assessment-watermark"></div>
  <form id="assessmentForm" style="max-width:600px; margin:0 auto; background:rgba(255,255,255,0.95); border-radius:18px; box-shadow:0 4px 16px #0001; padding:2rem;">
    <div class="assessment-question mb-4">
      <label class="form-label">1. เบื่อ ไม่สนใจทำอะไร</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q1" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q1" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q1" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q1" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q1" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q1" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q1" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">2. ไม่สบายใจ ซึมเศร้า ท้อแท้</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q2" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q2" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q2" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q2" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q2" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q2" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q2" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">3. หลับยากหรือหลับๆ ตื่นๆ หรือหลับมากไป</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q3" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q3" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q3" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q3" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q3" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q3" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q3" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">4. เหนื่อยงานหรือไม่ค่ยมีแรง</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q4" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q4" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q4" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q4" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q4" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q4" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q4" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">5. เบื่ออาหาร หรือกินมากเกินไป</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q5" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q5" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q5" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q5" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q5" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q5" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q5" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">6. รู้สึกไม่ดีกับตัวเอง คิดว่าตัวเองล้มเหลว หรือทำให้ตัวเองผิดหวัง</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q6" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q6" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q6" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q6" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q6" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q6" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q6" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">7. สมาธิไม่ดีเวลาทำอะไร เช่น ดูโทรทัศน์ฟังวิทยุหรือทำงานที่ต้องใช้ความตั้งใจ</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q7" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q7" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q7" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q7" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q7" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q7" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q7" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">8. พูดช้า ทำอะไรช้าลง จนคนอื่นสังเกตุเห็นได้หรือกระสับกระส่ายไม่สามารถอยู่นิ่งได้เหมือนที่เคยเป็น</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q8" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q8" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q8" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q8" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q8" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q8" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q8" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="assessment-question mb-4">
      <label class="form-label">9. คิดทำร้ายตนเองหรือคิดว่าถ้าตายไปคงจะดี</label>
      <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
      <div class="radio-group-custom mb-2">
        <label><input type="radio" name="q9" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
        <label><input type="radio" name="q9" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
        <label><input type="radio" name="q9" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
        <label><input type="radio" name="q9" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        <label><input type="radio" name="q9" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
        <label><input type="radio" name="q9" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
        <label><input type="radio" name="q9" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
      </div>
    </div>
    <div class="text-center">
      <button type="submit" class="btn btn-primary btn-lg">ส่งคำตอบ</button>
    </div>
  </form>
</div>

  <!-- Page 12: ผลการประเมิน (บ้านทานตะวัน) -->
  <div id="page12" style="display:none; background:#e3ffe6; min-height:100vh; padding:3rem 1rem; text-align:center; font-family:'Maitree','Noto Sans Thai',sans-serif; display:flex; flex-direction:column; justify-content:center; align-items:center;">
    <div style="max-width:700px; width:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:70vh; margin:auto;">
      <h2 style="font-weight:700; font-size:2.2rem; margin-bottom:1.5rem; color:#333;">ผลการประเมิน</h2>
      <p style="font-size:1.3rem; margin-bottom:2rem;">คุณจัดอยู่ในบ้าน <strong>"ทานตะวัน"</strong></p>
      <div style="background:#feffff; padding:2rem; border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.08); display:flex; flex-direction:column; align-items:center; justify-content:center;">
        <p style="font-size:1.1rem; font-weight:600; margin-bottom:0.5rem;">ระดับความรุนแรงของปัญหาด้านอารมณ์ (ทานตะวัน)</p>
        <div style="width:100%; background:#e3ffe6; height:30px; border-radius:50px; overflow:hidden; margin:0 auto 1rem; max-width:400px;">
          <div id="sunflowerBar" style="height:100%; width:0%; background:linear-gradient(to right, orange, red); transition:width 1s;"></div>
        </div>
        <p id="sunflowerPercent" style="font-size:1rem; color:#444;"></p>
      </div>
      <button id="toNextFrom12" class="btn btn-success px-5 py-2 rounded-pill" style="font-size:1.2rem; margin-top:3rem;">ถัดไป</button>
    </div>
  </div>

  <!-- Page 13: รายละเอียดกลุ่มทานตะวัน -->
  <div id="page13" style="display:none; background:#e3ffe6; min-height:100vh; padding:3rem 1rem; font-family:'Maitree','Noto Sans Thai',sans-serif; position:relative;">
    <div style="position:absolute; top:50%; left:50%; width:420px; height:420px; opacity:0.08; z-index:0; transform:translate(-50%,-50%); pointer-events:none; background:url('https://i.ibb.co/kVmg7718/LINE-ALBUM-250603-1-1-1-removebg-preview.png') no-repeat center center; background-size:contain;"></div>
    <div style="max-width:750px; margin:0 auto; text-align:center;">
      <h2 style="font-weight:700; font-size:2.2rem; margin-bottom:1rem; color:#333;">คุณอยู่ในบ้าน "ทานตะวัน"</h2>
      <p style="font-size:1.2rem; text-align:left; line-height:1.7; background:#fff8db; padding:2rem; border-radius:20px; box-shadow:0 4px 12px rgba(0,0,0,0.05);">
        คุณอาจพบเจอกับอาการ:<br>
        • รู้สึกซึมเศร้า หดหู่ หรือสิ้นหวัง<br>
        • ขาดความสนใจหรือความสุขในกิจกรรมที่เคยชอบ<br>
        • น้ำหนักเปลี่ยนแปลงผิดปกติ<br>
        • นอนไม่หลับหรือนอนมากเกินไป<br>
        • รู้สึกอ่อนเพลีย ไม่มีพลัง<br>
        • รู้สึกผิด โทษตัวเอง หรือไร้ค่า<br>
        • มีสมาธิลดลง<br>
        • กระวนกระวาย เคลื่อนไหวช้า หรือกระสับกระส่าย<br>
        • มีความคิดอยากให้ตัวเองหายไปหรือยากทำร้ายตัวเอง<br>
      </p>
      <img src="https://i.ibb.co/F4LT2sqL/Chat-GPT-Image-Jun-13-2025-12-13-29-PM-2.png" alt="บ้านทานตะวัน" style="margin-top:2rem; max-width:100%; border-radius:20px; box-shadow:0 4px 12px rgba(0,0,0,0.1);" />
      
      <button id="toMissionBtn" class="btn btn-success mt-5 px-5 py-2 rounded-pill" style="font-size:1.2rem;">ไปยังภารกิจ</button>

    </div>
  </div>

  <!-- Page 14: ภารกิจพิชิตปีศาจ -->
  <div id="page14" style="display:block; min-height:100vh; background:#e3ffe6; padding:3rem 1rem; position:relative;">
    <div style="position:absolute; top:50%; left:50%; width:420px; height:420px; opacity:0.08; z-index:0; transform:translate(-50%,-50%); pointer-events:none; background:url('https://i.ibb.co/kVmg7718/LINE-ALBUM-250603-1-1-1-removebg-preview.png') no-repeat center center; background-size:contain;"></div>
    <div style="max-width:600px; margin:0 auto; text-align:center;">
      <h2 style="font-weight:700; font-size:2rem; margin-bottom:1.5rem;">พิชิตปีศาจแห่งอารมณ์</h2>
      <!-- กระดานรวมปีศาจ+แถบพลังชีวิต+ภารกิจ -->
      <div class="mission-board" style="background:#fff; border-radius:24px; box-shadow:0 6px 24px #0001; padding:2.5rem 1.5rem 2rem 1.5rem; max-width:540px; margin:0 auto;">
        <!-- แถบพลังชีวิต -->
        <div class="monster-hp-bar mb-4" style="margin-bottom:2rem;">
          <div id="hpBar" class="hp-fill"></div>
        </div>
        <!-- ปีศาจ -->
        <div style="margin:1.5rem 0 2rem 0; position:relative;">
          <img id="monsterImg" src="https://img5.pic.in.th/file/secure-sv1/ChatGPT-Image-Jun-14-2025-06_53_53-AM.png" alt="Monster" style="width:180px; height:180px; max-width:90%; object-fit:contain; border-radius:18px; background:#fff; box-shadow:0 4px 16px #0002; transition:transform 0.3s, filter 0.3s;">
          <div id="hpText" style="margin-top:1rem; font-weight:600; font-size:1.1rem;">พลังชีวิตปีศาจ: 100%</div>
        </div>
        <!-- ภารกิจ -->
        <ul id="missionList" style="list-style:none; padding:0; margin:0 auto; max-width:420px;">
          <li class="mission-item">
            <span>ฝึกหายใจแบบ 4-7-8 ก่อนนอน</span>
            <button class="do-btn btn btn-outline-success btn-sm ms-2" title="ทำภารกิจ" style="font-size:1.6rem; padding:0.2em 0.7em; line-height:1;">🗡️</button>
          </li>
          <li class="mission-item">
            <span>เขียนไดอารี่อารมณ์ประจำวัน</span>
            <button class="do-btn btn btn-outline-success btn-sm ms-2" title="ทำภารกิจ" style="font-size:1.6rem; padding:0.2em 0.7em; line-height:1;">🗡️</button>
          </li>
          <li class="mission-item">
            <span>ออกไปรับแสงแดดยามเช้า 15 นาที</span>
            <button class="do-btn btn btn-outline-success btn-sm ms-2" title="ทำภารกิจ" style="font-size:1.6rem; padding:0.2em 0.7em; line-height:1;">🗡️</button>
          </li>
          <li class="mission-item">
            <span>วาดภาพหรือระบายสีเพื่อสื่ออารมณ์</span>
            <button class="do-btn btn btn-outline-success btn-sm ms-2" title="ทำภารกิจ" style="font-size:1.6rem; padding:0.2em 0.7em; line-height:1;">🗡️</button>
          </li>
          <li class="mission-item">
            <span>พูดคุยกับเพื่อนหรือครอบครัว</span>
            <button class="do-btn btn btn-outline-success btn-sm ms-2" title="ทำภารกิจ" style="font-size:1.6rem; padding:0.2em 0.7em; line-height:1;">🗡️</button>
          </li>
        </ul>
        <div id="missionComplete" class="mt-4" style="display:none;">
          <h4 class="text-success">🎉 คุณพิชิตปีศาจได้แล้ว!</h4>
        </div>
      </div>

      <!-- ปุ่มไปหน้าสรุปภารกิจ (แสดงตลอดแต่กดได้เมื่อครบ 5/5) -->
      <div id="btnToPage15" style="display:none; text-align:center; margin-top:2.5rem;">
        <button id="goToPage15" class="btn btn-primary px-5 py-2 rounded-pill" style="font-size:1.1rem;">
          ไปยังหน้าสรุปภารกิจ
        </button>
      </div>
    </div>
    <!-- เสียงเอฟเฟกต์ -->
    <audio id="fxHit" src="https://cdn.pixabay.com/audio/2022/03/15/audio_6c69fb5402.mp3"></audio>

    <audio id="fxWin" src="https://cdn.pixabay.com/audio/2022/03/15/audio_98fce7e3a0.mp3"></audio>
    <audio id="fxMonsterCry" src="https://cdn.pixabay.com/audio/2022/08/09/audio_62ddbc3f66.mp3"></audio>
  </div>


  <!-- Mascot เพื่อนให้กำลังใจ (เอารูปออก เหลือแต่กล่องข้อความ) -->
  <div id="mascotSpeech" style="display:none; position:fixed; bottom:24px; right:24px; z-index:999; background:#fff; padding:14px 22px; border-radius:16px; box-shadow:0 2px 12px rgba(0,0,0,0.18); font-size:1.08rem; font-weight:500; color:#2c662d; animation: mascotPop 0.4s;">
    <!-- ข้อความกำลังใจจะมาแสดงตรงนี้ -->
  </div>

  <!-- หน้า 15: หน้าสรุปภารกิจ -->
  <div id="page15" style="display:none; min-height:100vh; background:#e3ffe6; padding:3rem 1rem;">
    <div style="max-width:500px; margin:0 auto; display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:70vh;">
      <img src="https://i.ibb.co/gMSn5z7H/LINE-ALBUM-250603-1-1-1-removebg-preview.png"
           alt="MindBloom Logo"
           style="width:120px; max-width:60vw; margin-bottom:2rem;">
      <h1 style="font-size:2.5rem; letter-spacing:0.7rem; font-weight:700; color:#2c662d; text-align:center; margin:0;">
        M I N D <br>B L O O M
      </h1>
      <div style="margin-top:2.5rem; margin-bottom:1.5rem;">
        <span style="font-size:1.25rem; color:#2c662d; font-weight:600;">ยินดีด้วยท่านผู้กล้าที่ทำภารกิจสำเร็จ ⚔</span>
      </div>
      <button id="startAssessmentBtn15" class="btn btn-primary px-5 py-2 rounded-pill" style="font-size:1.1rem; margin-top:2.5rem;">
        เริ่มทำแบบประเมิน
      </button>
    </div>
  </div>

  <!-- หน้า 16: ใช้ชุดคำถามเดียวกับหน้า 11 (PHQ-9) -->
  <div id="page16" style="display:none; min-height:100vh; background-color:#e3ffe6; padding:4rem 1rem; position:relative; user-select:none;">
    <div class="assessment-watermark"></div>
    <form id="assessmentForm" style="max-width:600px; margin:0 auto; background:rgba(255,255,255,0.95); border-radius:18px; box-shadow:0 4px 16px #0001; padding:2rem;">
      <div class="assessment-question mb-4">
        <label class="form-label">1. เบื่อ ไม่สนใจทำอะไร</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q1" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q1" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q1" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q1" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q1" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q1" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q1" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">2. ไม่สบายใจ ซึมเศร้า ท้อแท้</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q2" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q2" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q2" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q2" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q2" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q2" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q2" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">3. หลับยากหรือหลับๆ ตื่นๆ หรือหลับมากไป</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q3" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q3" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q3" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q3" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q3" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q3" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q3" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">4. เหนื่อยงานหรือไม่ค่ยมีแรง</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q4" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q4" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q4" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q4" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q4" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q4" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q4" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">5. เบื่ออาหาร หรือกินมากเกินไป</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q5" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q5" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q5" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q5" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q5" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q5" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q5" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">6. รู้สึกไม่ดีกับตัวเอง คิดว่าตัวเองล้มเหลว หรือทำให้ตัวเองผิดหวัง</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q6" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q6" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q6" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q6" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q6" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q6" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q6" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">7. สมาธิไม่ดีเวลาทำอะไร เช่น ดูโทรทัศน์ฟังวิทยุหรือทำงานที่ต้องใช้ความตั้งใจ</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q7" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q7" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q7" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q7" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q7" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q7" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q7" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">8. พูดช้า ทำอะไรช้าลง จนคนอื่นสังเกตุเห็นได้หรือกระสับกระส่ายไม่สามารถอยู่นิ่งได้เหมือนที่เคยเป็น</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q8" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q8" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q8" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q8" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q8" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q8" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q8" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">9. คิดทำร้ายตนเองหรือคิดว่าถ้าตายไปคงจะดี</label>
        <div class="scale-labels"><span>น้อยที่สุด</span><span>มากที่สุด</span></div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="q9" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="q9" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="q9" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="q9" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
          <label><input type="radio" name="q9" value="5" /><span class="custom-radio-scale"></span><span>5</span></label>
          <label><input type="radio" name="q9" value="6" /><span class="custom-radio-scale"></span><span>6</span></label>
          <label><input type="radio" name="q9" value="7" /><span class="custom-radio-scale"></span><span>7</span></label>
        </div>
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-primary btn-lg">ส่งคำตอบ</button>
      </div>
    </form>
  </div>

  <!-- Page 17: เปรียบเทียบผลการประเมินรอบแรกกับรอบที่สอง (horizontal bar) -->
  <div id="page17" style="display:none; background:#e3ffe6; min-height:100vh; padding:3rem 1rem; text-align:center; font-family:'Maitree','Noto Sans Thai',sans-serif;">
    <div style="max-width:700px; margin:0 auto;">
      <h2 style="font-weight:700; font-size:2.2rem; margin-bottom:1.5rem; color:#333;">เปรียบเทียบผลการประเมิน</h2>
      <div style="background:#feffff; padding:2rem; border-radius:20px; box-shadow:0 8px 20px rgba(0,0,0,0.08);">
        <p style="font-size:1.1rem; font-weight:600; margin-bottom:1.5rem;">คะแนนการประเมินรอบแรกและรอบที่สอง</p>
        <div style="display:flex; flex-direction:column; gap:2.5rem; align-items:center; margin-bottom:1.5rem;">
          <div style="display:flex; align-items:center; width:90%; max-width:500px;">
            <span style="width:80px; text-align:right; font-weight:600; margin-right:18px;">รอบแรก</span>
            <div style="flex:1; background:#e3ffe6; border-radius:16px; height:38px; position:relative; overflow:hidden;">
              <div id="barFirstH" style="height:100%; width:0%; background:linear-gradient(90deg, #36d846, #a8e063); border-radius:16px; transition:width 1s;"></div>
              <span id="percentFirstH" style="position:absolute; right:12px; top:50%; transform:translateY(-50%); font-weight:700; color:#222;"></span>
            </div>
          </div>
          <div style="display:flex; align-items:center; width:90%; max-width:500px;">
            <span style="width:80px; text-align:right; font-weight:600; margin-right:18px;">รอบสอง</span>
            <div style="flex:1; background:#e3ffe6; border-radius:16px; height:38px; position:relative; overflow:hidden;">
              <div id="barSecondH" style="height:100%; width:0%; background:linear-gradient(90deg, #24eed3, #36d846); border-radius:16px; transition:width 1s;"></div>
              <span id="percentSecondH" style="position:absolute; right:12px; top:50%; transform:translateY(-50%); font-weight:700; color:#222;"></span>
            </div>
          </div>
        </div>
        <div id="compareSummary" style="font-size:1.15rem; font-weight:600; color:#2c662d;"></div>
        <div id="trendText" style="font-size:1.1rem; margin-top:2.2rem; color:#333; font-weight:500;"></div>
        <div style="margin-top:2.5rem; text-align:center;">
          <button id="btnFinish17" class="btn btn-success px-5 py-2 rounded-pill" style="font-size:1.1rem;">เสร็จสิ้น</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Page 18: ข้อความให้กำลังใจหลังจบแบบประเมิน -->
  <div id="page18" style="display:none; min-height:100vh; background:#e3ffe6; display:flex; flex-direction:column; justify-content:center; align-items:center;">
    <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; width:100%; max-width:480px; min-height:60vh; margin:auto; margin-top:5vh;">
      <div style="background:#fff; border-radius:22px; box-shadow:0 4px 18px #0001; padding:2.5rem 1.5rem; text-align:center; font-size:1.18rem; color:#2c662d; font-family:'Maitree','Noto Sans Thai',sans-serif; margin-bottom:2.5rem;">
        ทางเราหวังว่าแบบประเมินชุดนี้จะช่วยให้ท่านได้รับรู้ข้อมูลของโรคที่ท่านกำลังเผชิญอยู่<br>
        ทางเราขอให้กำลังใจท่านให้ผ่านเหตุการณ์ครั้งนี้ไปได้<br><br>
        <span style="font-size:1.3rem; font-weight:600;">" มาผ่านเรื่องนี้ไปด้วยกันนะครับ "</span>
      </div>
      <img src="https://i.ibb.co/kVmg7718/LINE-ALBUM-250603-1-1-1-removebg-preview.png" alt="MindBloom Logo" style="width:140px; max-width:60vw;">
      <div style="display:flex; flex-direction:column; gap:1rem; margin-top:2.5rem; width:100%; max-width:280px;">
        <button id="btnSatisfaction18" class="btn btn-primary px-4 py-2 rounded-pill" style="font-size:1.1rem;">ทำแบบประเมินความพึงพอใจ</button>
        <button id="btnHome18" class="btn btn-outline-secondary px-4 py-2 rounded-pill" style="font-size:1.1rem;">กลับไปยังหน้าแรก</button>
      </div>
    </div>
  </div>

  <!-- Page 19: แบบประเมินความพึงพอใจ -->
  <div id="page19" style="display:none; min-height:100vh; background:#e3ffe6; position:relative;">
    <!-- ลายน้ำโลโก้ -->
    <div style="position:absolute; top:50%; left:50%; width:420px; height:420px; opacity:0.08; z-index:0; transform:translate(-50%,-50%); pointer-events:none; background:url('https://i.ibb.co/kVmg7718/LINE-ALBUM-250603-1-1-1-removebg-preview.png') no-repeat center center; background-size:contain;"></div>
    <form id="satisfactionForm" style="max-width:520px; margin:0 auto; background:rgba(255,255,255,0.97); border-radius:22px; box-shadow:0 4px 18px #0001; padding:2.5rem 1.5rem; position:relative; z-index:1; margin-top:5vh;">
      <h2 style="font-weight:700; font-size:1.5rem; color:#2c662d; text-align:center; margin-bottom:2.2rem;">แบบประเมินความพึงพอใจ</h2>
      <div class="assessment-question mb-4">
        <label class="form-label">1) ขั้นตอนการใช้ไม่ยุ่งยากซับซ้อน และมีความคล่องตัว</label>
        <div class="scale-labels" style="display:flex; justify-content:space-between; max-width:320px; margin:0 auto 6px auto; font-size:0.95rem; color:#555; font-weight:600;">
          <span>น้อยที่สุด</span>
          <span>มากที่สุด</span>
        </div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="sat1" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="sat1" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="sat1" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="sat1" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">2) ความชัดเจนในการอธิบาย ชี้แจง และแนะนําขั้นตอน</label>
        <div class="scale-labels" style="display:flex; justify-content:space-between; max-width:320px; margin:0 auto 6px auto; font-size:0.95rem; color:#555; font-weight:600;">
          <span>น้อยที่สุด</span>
          <span>มากที่สุด</span>
        </div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="sat2" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="sat2" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="sat2" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="sat2" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">3) ระบบ Interface มีความน่าดึงดูดให้ใช้งาน</label>
        <div class="scale-labels" style="display:flex; justify-content:space-between; max-width:320px; margin:0 auto 6px auto; font-size:0.95rem; color:#555; font-weight:600;">
          <span>น้อยที่สุด</span>
          <span>มากที่สุด</span>
        </div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="sat3" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="sat3" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="sat3" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="sat3" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        </div>
      </div>
      <div class="assessment-question mb-4">
        <label class="form-label">4) ผู้ใช้มีเเนวโน้มทางสุขภาพจิตที่ดีขึ้น</label>
        <div class="scale-labels" style="display:flex; justify-content:space-between; max-width:320px; margin:0 auto 6px auto; font-size:0.95rem; color:#555; font-weight:600;">
          <span>น้อยที่สุด</span>
          <span>มากที่สุด</span>
        </div>
        <div class="radio-group-custom mb-2">
          <label><input type="radio" name="sat4" value="1" required /><span class="custom-radio-scale"></span><span>1</span></label>
          <label><input type="radio" name="sat4" value="2" /><span class="custom-radio-scale"></span><span>2</span></label>
          <label><input type="radio" name="sat4" value="3" /><span class="custom-radio-scale"></span><span>3</span></label>
          <label><input type="radio" name="sat4" value="4" /><span class="custom-radio-scale"></span><span>4</span></label>
        </div>
      </div>
      <div class="text-center" style="margin-top:2.5rem;">
        <button type="submit" class="btn btn-success px-5 py-2 rounded-pill" style="font-size:1.1rem;">ส่งแบบประเมิน</button>
      </div>
    </form>
  </div>

  <!-- Page 20: ขอบคุณสำหรับความร่วมมือ -->
  <div id="page20" style="display:none; min-height:100vh; background:#e3ffe6; display:flex; flex-direction:column; align-items:center; justify-content:center;">
    <div style="width:100%; max-width:480px; margin:auto; display:flex; flex-direction:column; align-items:center; justify-content:center;">
      <img src="https://i.ibb.co/kVmg7718/LINE-ALBUM-250603-1-1-1-removebg-preview.png" alt="MindBloom Logo" style="width:120px; max-width:60vw; margin-bottom:2.2rem; margin-top:2.2rem;">
      <div style="background:#fff; border-radius:22px; box-shadow:0 4px 18px #0001; padding:2.2rem 1.2rem; text-align:center; font-size:1.15rem; color:#2c662d; font-family:'Maitree','Noto Sans Thai',sans-serif; margin-bottom:2.2rem;">
        ขอขอบคุณสำหรับความร่วมมือ<br>
        <span style="font-size:1.1rem; color:#222; font-weight:600; display:block; margin-top:1.2rem;">เสร็จสิ้นการทำเเบบประเมินความพึงพอใจ</span>
      </div>
      <button id="btnTo21" class="btn btn-primary px-5 py-2 rounded-pill" style="font-size:1.1rem;">ถัดไป</button>
    </div>
  </div>

  <!-- Page 21: ข้อมูลติดต่อที่ปรึกษา -->
  <div id="page21" style="display:none; min-height:100vh; background:#e3ffe6; position:relative;">
    <!-- ลายน้ำโลโก้ -->
    <div style="position:absolute; top:50%; left:50%; width:420px; height:420px; opacity:0.08; z-index:0; transform:translate(-50%,-50%); pointer-events:none; background:url('https://i.ibb.co/kVmg7718/LINE-ALBUM-250603-1-1-1-removebg-preview.png') no-repeat center center; background-size:contain;"></div>
    <div style="max-width:520px; margin:0 auto; background:rgba(255,255,255,0.97); border-radius:22px; box-shadow:0 4px 18px #0001; padding:2.8rem 1.5rem; position:relative; z-index:1; margin-top:7vh; text-align:center;">
      <div style="font-size:3rem; margin-bottom:1.2rem;">🚑</div>
      <h2 style="font-size:2rem; font-weight:700; color:#2c662d; margin-bottom:2.2rem;">หากต้องการที่ปรึกษา</h2>
      <div style="font-size:1.18rem; color:#222; line-height:2; font-weight:500;">
        โทร <b>1323</b> (สายด่วนสุขภาพจิต)<br>
        โทร <b>988</b> (Suicide&Crisis Lifeline)<br>
        Line <b>@JVKKHelpLine</b> <br>
        <span style="font-size:0.98rem; color:#555;">(Chatbot "KhuiKun" กรมสุขภาพจิต)</span><br>
        Facebook <b>Psyjaibot</b><br>
        <span style="font-size:0.98rem; color:#555;">(Chatbot สุขภาพจิต โรงพยาบาลศิริราช)</span>
      </div>
      <div style="display:flex; flex-direction:column; gap:1rem; align-items:center; margin-top:2.5rem;">
        <a href="tel:1323" class="btn btn-success px-5 py-2 rounded-pill" style="font-size:1.1rem;">โทร 1323</a>
        <button id="btnHome21" class="btn btn-outline-secondary px-5 py-2 rounded-pill" style="font-size:1.1rem;">กลับหน้าแรก</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    // ------------------------
    // ตัวแปรเก็บข้อมูลแบบประเมิน ตัวอย่างคำถาม
    // ------------------------
    const questions = [
      "1. คุณรู้สึกเครียดหรือวิตกกังวลบ่อยแค่ไหน?",
      "2. คุณรู้สึกหมดแรง ไม่มีแรงทำอะไรหรือไม่?",
      "3. คุณนอนหลับได้ดีหรือไม่ในช่วงที่ผ่านมา?",
      "4. คุณรู้สึกไม่มีความสุขกับชีวิตบ่อยแค่ไหน?",
      "5. คุณรู้สึกหงุดหงิดหรือโมโหง่ายหรือไม่?",
    ];

    let currentQuestionIndex = 0;
    let answers = [];

    // ------------------------
    // แสดงหรือซ่อนหน้า
    // ------------------------
    function showPage(id) {
      document.querySelectorAll('div[id^="page"]').forEach(div => div.style.display = 'none');
      document.getElementById(id).style.display = 'block';
    }

    // ------------------------
    // เริ่มต้นแสดงหน้า Login
    // ------------------------
    showPage('pageLogin');

    // ------------------------
    // ลิงก์สลับหน้า Register <-> Login
    // ------------------------
    document.getElementById('goToRegister').addEventListener('click', e => {
      e.preventDefault();
      showPage('pageRegister');
    });
    document.getElementById('goToLogin').addEventListener('click', e => {
      e.preventDefault();
      showPage('pageLogin');
    });

    // ------------------------
    // ฟังก์ชันตรวจสอบ Login แบบง่าย (จำลอง)
    // ------------------------
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const username = document.getElementById('loginUsername').value.trim();
      const password = document.getElementById('loginPassword').value.trim();

      if (username === "" || password === "") {
        Swal.fire('ผิดพลาด', 'กรุณากรอกชื่อผู้ใช้และรหัสผ่านให้ครบ', 'error');
        return;
      }

      // สมมติ login ผ่าน
      Swal.fire({
        icon: 'success',
        title: 'เข้าสู่ระบบสำเร็จ',
        showConfirmButton: false,
        timer: 1200
      }).then(() => {
        // ไปหน้า 10 (pre-assessment)
        showPage('page10');
      });
    });

    // ------------------------
    // ฟังก์ชัน Register แบบง่าย (จำลอง)
    // ------------------------
    document.getElementById('registerForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const username = document.getElementById('registerUsername').value.trim();
      const phone = document.getElementById('registerPhone').value.trim();
      const password = document.getElementById('registerPassword').value.trim();

      if (username === "" || phone === "" || password === "") {
        Swal.fire('ผิดพลาด', 'กรุณากรอกข้อมูลให้ครบถ้วน', 'error');
        return;
      }

      // สมมติลงทะเบียนสำเร็จ
      Swal.fire({
        icon: 'success',
        title: 'สมัครสมาชิกสำเร็จ',
        showConfirmButton: false,
        timer: 1200
      }).then(() => {
        showPage('pageLogin');
      });
    });

    // ------------------------
    // ปุ่มเริ่มทำแบบประเมิน
    // ------------------------
    document.getElementById('startAssessmentBtn').addEventListener('click', () => {
      showPage('page11');
    });

    // ส่งคำตอบแบบประเมิน (รองรับทั้งรอบแรกและรอบสอง)
    document.querySelectorAll('#page11 #assessmentForm, #page16 #assessmentForm').forEach(form => {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        const answers = [];
        let valid = true;
        for (let i = 1; i <= 9; i++) {
          const val = this.querySelector('input[name="q'+i+'"]:checked');
          if (!val) {
            valid = false;
            break;
          }
          answers.push(parseInt(val.value));
        }
        if (!valid) {
          Swal.fire('กรุณาตอบคำถามให้ครบทุกข้อ', '', 'warning');
          return;
        }
        // คำนวณคะแนนเฉลี่ย (1-7)
        const maxScore = 7;
        const avg = answers.reduce((a, b) => a + b, 0) / answers.length;
        const percent = Math.round((avg / maxScore) * 100);

        // รอบแรก (page11)
        if (this.closest('#page11')) {
          percentFirst = percent;
          document.getElementById('sunflowerBar').style.width = percent + '%';
          document.getElementById('sunflowerPercent').innerText = `คะแนนความรุนแรงของคุณอยู่ที่ ${percent}%`;
          showPage('page12');
        }
        // รอบสอง (page16)
        else if (this.closest('#page16')) {
          percentSecond = percent;
          showComparePage();
          showPage('page17');
        }
      });
    });

    // ปุ่ม "ถัดไป" หน้า 12
    document.getElementById('toNextFrom12').addEventListener('click', () => {
      showPage('page13');
    });

    // ปุ่มไปยังภารกิจ (เตรียมสำหรับหน้า 14)
    document.getElementById('toMissionBtn').addEventListener('click', () => {
      showPage('page14');
    });

    // ------------------------
    // ระบบปีศาจและภารกิจ (หน้า 14)
    // ------------------------
    let monsterHP = 100;
    const monsterImg = document.getElementById('monsterImg');
    const hpText = document.getElementById('hpText');
    const missionButtons = document.querySelectorAll('.do-btn');
    const fxHit = document.getElementById('fxHit');
    const fxWin = document.getElementById('fxWin');
    const missionComplete = document.getElementById('missionComplete');

    // รูปปีศาจแต่ละระดับ HP
    const monsterImages = {
      100: "https://img5.pic.in.th/file/secure-sv1/ChatGPT-Image-Jun-14-2025-06_53_53-AM.png",
      80:  "https://i.ibb.co/BKSzWXYQ/Screenshot-68.png",
      60:  "https://i.ibb.co/vxDDJrBs/Chat-GPT-Image-Jun-13-2025-03-55-23-PM.png",
      40:  "https://i.ibb.co/rhGNfPp/Chat-GPT-Image-Jun-13-2025-03-55-21-PM.png",
      20:  "https://i.ibb.co/rGtkKhf6/Chat-GPT-Image-Jun-13-2025-03-55-17-PM.png",
      0:   "https://i.ibb.co/fzSVyQxG/Chat-GPT-Image-Jun-13-2025-03-54-34-PM.png"
    };

    // ฟังก์ชันอัปเดตรูปและขนาดปีศาจ
    function updateMonsterImg(hp) {
      if (monsterImages[hp]) {
        monsterImg.src = monsterImages[hp];
      }
      monsterImg.style.width = "180px";
      monsterImg.style.height = "180px";
    }

    // อัปเดต HP Text
    function updateMonsterHP(hp) {
      hpText.innerText = `พลังชีวิตปีศาจ: ${hp}%`;
    }

    // ปุ่มไปหน้าสรุปภารกิจ (แสดงตลอดแต่กดได้เมื่อครบ 5/5)
    const btnToPage15 = document.getElementById('btnToPage15');
    const goToPage15 = document.getElementById('goToPage15');
    if (btnToPage15) btnToPage15.style.display = 'none';

    // ระบบกดปุ่มภารกิจ
    missionButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        if (monsterHP <= 0 || btn.disabled) return;

        // กล่องข้อความให้ผู้ใช้เขียนทุกครั้งที่กดยืนยันภารกิจ
        Swal.fire({
          title: 'บันทึกความรู้สึก/สิ่งที่อยากบอก',
          input: 'textarea',
          inputPlaceholder: 'เขียนข้อความของคุณที่นี่...',
          showCancelButton: true,
          confirmButtonText: 'บันทึก',
          cancelButtonText: 'ข้าม'
        }).then(result => {
          if (result.isConfirmed || result.isDismissed) {
            btn.disabled = true;
            btn.innerHTML = '💥';
            btn.classList.add('rotate-sword');

            monsterHP -= 20;
            if (monsterHP < 0) monsterHP = 0;

            fxHit.currentTime = 0;
            fxHit.play();

            monsterImg.classList.add('monster-hit');
            setTimeout(() => {
              monsterImg.classList.remove('monster-hit');
              updateMonsterImg(monsterHP);
              updateMonsterHP(monsterHP);

            }, 400);

            if (monsterHP === 0) {
              missionComplete.style.display = 'block';
              // หลังทำภารกิจครบ (monsterHP === 0)
              document.getElementById('btnToPage15').style.display = 'block';

              fxWin.play();
            }
          }
        });
      });
    });

    // ปุ่มไปหน้า 15 (ทำแบบประเมิน PHQ-9)
    if (goToPage15) {
      goToPage15.addEventListener('click', () => {
        showPage('page15');
      });
    }

    // ------------------------
    // รวมและแก้ไขระบบข้อความให้กำลังใจ (ไม่ซ้ำซ้อน, วน 20 ข้อ, ทุก 10 วิ, ไม่ต้องเริ่มใหม่เมื่อเปลี่ยนหน้า)
    const mascotLines = [
      "วันนี้ก็เป็นวันที่ดีอีกวันนะ",
      "ขอบคุณที่ดูแลใจตัวเอง 😊",
      "ทุกก้าวเล็ก ๆ คือความสำเร็จ",
      "เหนื่อยได้ แต่อย่าท้อ",
      "คุณมีคุณค่าในแบบของตัวเอง",
      "พักบ้างก็ได้นะ ไม่ต้องรีบ",
      "ขอให้วันนี้ใจดีต่อตัวเอง",
      "ความพยายามของคุณสำคัญเสมอ",
      "ยิ้มให้ตัวเองในกระจกหน่อยนะ",
      "ทุกปัญหามีทางออกเสมอ",
      "ขอบคุณที่ไม่ยอมแพ้",
      "คุณเก่งมากแล้วที่มาถึงตรงนี้",
      "ให้เวลากับตัวเองบ้างนะ",
      "ทุกความรู้สึกของคุณมีความหมาย",
      "อย่าลืมหายใจลึก ๆ แล้วผ่อนคลาย",
      "ขอให้วันนี้เป็นวันที่สดใส",
      "คุณไม่ได้อยู่คนเดียว",
      "ขอให้ใจคุณเบาสบายขึ้นทุกวัน",
      "ขอบคุณที่กล้าดูแลตัวเอง",
      "เชื่อมั่นในตัวเองนะ"
    ];

    let mascotIndex = 0;
    function cycleMascotSpeech() {
      const el = document.getElementById('mascotSpeech');
      if (!el) return;
      el.innerText = mascotLines[mascotIndex];
      el.style.display = 'block';
      el.style.opacity = '1';
      el.classList.remove('mascot-fadeout');
      el.style.animation = 'mascotPop 0.4s';
      setTimeout(() => {
        el.classList.add('mascot-fadeout');
        setTimeout(() => {
          el.style.display = 'none';
          el.classList.remove('mascot-fadeout');
        }, 1200); // เฟดหาย 1.2 วิ
      }, 10000); // แสดง 10 วิ
      mascotIndex = (mascotIndex + 1) % mascotLines.length;
    }
    setInterval(cycleMascotSpeech, 12000); // ทุก 12 วิ
    window.addEventListener('DOMContentLoaded', cycleMascotSpeech);

    // ฟังก์ชันโชว์ข้อความกำลังใจเด้งขวาล่าง 1 ครั้งเมื่อเปลี่ยนหน้า (ใช้สำหรับ showPage)
    function showMascotSpeech(msg) {
      const el = document.getElementById('mascotSpeech');
      if (!el) return;
      el.innerText = msg;
      el.style.display = 'block';
      el.style.opacity = '1';
      el.classList.remove('mascot-fadeout');
      el.style.animation = 'mascotPop 0.4s';
      setTimeout(() => {
        el.classList.add('mascot-fadeout');
        setTimeout(() => {
          el.style.display = 'none';
          el.classList.remove('mascot-fadeout');
        }, 800);
      }, 3000);
    }

    // ปุ่มเริ่มทำแบบประเมินรอบที่ 2 (หน้า 15 ไปหน้า 16)
    document.getElementById('startAssessmentBtn15').addEventListener('click', () => {
      showPage('page16');
    });

    // ตัวแปรเก็บคะแนน
    let percentFirst = null;
    let percentSecond = null;

    // หลังส่งแบบประเมินรอบแรก (หน้า 11)
    // (ใน event submit ของ assessmentForm สำหรับรอบแรก)
    // ให้บันทึก percentFirst = ...
    // หลังส่งแบบประเมินรอบสอง (หน้า 16)
    // ให้บันทึก percentSecond = ...
    // และ showPage('page17')

    // ฟังก์ชันแสดงผลเปรียบเทียบในหน้า 17
    function showComparePage() {
      // Horizontal bar
      document.getElementById('barFirstH').style.width = (percentFirst || 0) + '%';
      document.getElementById('barSecondH').style.width = (percentSecond || 0) + '%';
      document.getElementById('percentFirstH').innerText = percentFirst !== null ? percentFirst + '%' : '-';
      document.getElementById('percentSecondH').innerText = percentSecond !== null ? percentSecond + '%' : '-';
      // ข้อความสรุป
      let summary = '';
      let trend = '';
      if (percentFirst !== null && percentSecond !== null) {
        if (percentSecond > percentFirst) {
          summary = 'คะแนนรอบที่สองสูงขึ้น (+ ' + (percentSecond - percentFirst) + '%)';
          trend = 'จากผลประเมิน แสดงว่าคุณมีแนวโน้มในการพัฒนาสุขภาพจิตที่ดีขึ้น';
        } else if (percentSecond < percentFirst) {
          summary = 'คะแนนรอบที่สองลดลง (− ' + (percentFirst - percentSecond) + '%)';
          trend = 'จากผลประเมิน แสดงว่าคุณมีแนวโน้มในการพัฒนาสุขภาพจิตที่ลดลง';
        } else {
          summary = 'คะแนนเท่าเดิมทั้งสองรอบ';
          trend = 'จากผลประเมิน แสดงว่าคุณมีแนวโน้มในการพัฒนาสุขภาพจิตที่คงที่';
        }
      }
      document.getElementById('compareSummary').innerText = summary;
      document.getElementById('trendText').innerText = trend;
    }

    // เพิ่ม event listener สำหรับปุ่มเสร็จสิ้นในหน้า 17
    document.getElementById('btnFinish17').addEventListener('click', function() {
      showPage('page18'); // ไปหน้า 18 เมื่อกดปุ่มเสร็จสิ้น
    });

    // เพิ่ม event listener สำหรับปุ่มในหน้า 18
    document.getElementById('btnSatisfaction18').addEventListener('click', function() {
      // ไปหน้าแบบประเมินความพึงพอใจ (page 19)
      showPage('page19');
    });
    
    document.getElementById('btnHome18').addEventListener('click', function() {
      showPage('pageLogin'); // กลับไปหน้าแรก (หน้า login)
    });

    // เพิ่ม event listener สำหรับแบบประเมินความพึงพอใจ (page19)
    document.getElementById('satisfactionForm').addEventListener('submit', function(e) {
      e.preventDefault();
      // สามารถเก็บข้อมูลหรือส่งออกได้ที่นี่
      showPage('page20');
    });
    // ปุ่มถัดไปในหน้า 20
    document.getElementById('btnTo21').addEventListener('click', function() {
      showPage('page21');
    });

    // เพิ่ม event listener สำหรับปุ่มกลับหน้าแรกในหน้า 21
    document.getElementById('btnHome21').addEventListener('click', function() {
      showPage('pageLogin');
    });
  </script>
</body>